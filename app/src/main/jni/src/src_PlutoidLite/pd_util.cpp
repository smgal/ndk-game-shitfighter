
#include "pd_util.h"

#include <stdio.h>

/*
void _WriteLog(const char* sz_str, int line)
{
	char s[255];
	sprintf(s, "t_%s_%d", sz_str, line);

	FILE* file = fopen(s, "wb");
	if (file)
		fclose(file);
}
*/
static const int S_SIN_TABLE_X16[91] = 
{
		0, // 0.000000
	 1144, // 0.017452
	 2287, // 0.034899
	 3430, // 0.052336
	 4572, // 0.069756
	 5712, // 0.087156
	 6850, // 0.104528
	 7987, // 0.121869
	 9121, // 0.139173
	10252, // 0.156434
	11380, // 0.173648
	12505, // 0.190809
	13626, // 0.207912
	14742, // 0.224951
	15855, // 0.241922
	16962, // 0.258819
	18064, // 0.275637
	19161, // 0.292372
	20252, // 0.309017
	21336, // 0.325568
	22415, // 0.342020
	23486, // 0.358368
	24550, // 0.374607
	25607, // 0.390731
	26656, // 0.406737
	27697, // 0.422618
	28729, // 0.438371
	29753, // 0.453990
	30767, // 0.469472
	31772, // 0.484810
	32768, // 0.500000
	33754, // 0.515038
	34729, // 0.529919
	35693, // 0.544639
	36647, // 0.559193
	37590, // 0.573576
	38521, // 0.587785
	39441, // 0.601815
	40348, // 0.615661
	41243, // 0.629320
	42126, // 0.642788
	42995, // 0.656059
	43852, // 0.669131
	44695, // 0.681998
	45525, // 0.694658
	46341, // 0.707107
	47143, // 0.719340
	47930, // 0.731354
	48703, // 0.743145
	49461, // 0.754710
	50203, // 0.766044
	50931, // 0.777146
	51643, // 0.788011
	52339, // 0.798636
	53020, // 0.809017
	53684, // 0.819152
	54332, // 0.829038
	54963, // 0.838671
	55578, // 0.848048
	56175, // 0.857167
	56756, // 0.866025
	57319, // 0.874620
	57865, // 0.882948
	58393, // 0.891007
	58903, // 0.898794
	59396, // 0.906308
	59870, // 0.913545
	60326, // 0.920505
	60764, // 0.927184
	61183, // 0.933580
	61584, // 0.939693
	61966, // 0.945519
	62328, // 0.951057
	62672, // 0.956305
	62997, // 0.961262
	63303, // 0.965926
	63589, // 0.970296
	63856, // 0.974370
	64104, // 0.978148
	64332, // 0.981627
	64540, // 0.984808
	64729, // 0.987688
	64898, // 0.990268
	65048, // 0.992546
	65177, // 0.994522
	65287, // 0.996195
	65376, // 0.997564
	65446, // 0.998630
	65496, // 0.999391
	65526, // 0.999848
	65536  // 1.000000
};

int Sin_16_16(int degree)
{
	if ((degree %= 360) < 0)
		degree += 360;

	switch ((degree) / 90)
	{
		case  0:
			return  S_SIN_TABLE_X16[degree];
		case  1:
			return  S_SIN_TABLE_X16[180 - degree];
		case  2:
			return -S_SIN_TABLE_X16[degree - 180];
		default:
			return -S_SIN_TABLE_X16[360 - degree];
	}
}

int Cos_16_16(int degree)
{
	return Sin_16_16(degree + 90);
}
